# 演習 3 : Advanced なアプリケーション設定

[演習 2](ex02.md) では Web サイトを Web サーバーで運用する際に必要となる一般的な設定や操作を App Service で行うための方法について紹介しましたが、この演習 3 では Web アプリケーションを運用するためのより高度な設定を行う以下の方法について紹介します。

 1. より高度なデプロイ
    1. デプロイ スロット
    2. GitHub Actions による CI/CD
2. 可用性設定
    1. スケールアップ/スケールアウト/自動スケーリング
    2. スケジュール/メトリックス設定
    3. スケーリングに伴う追加サービスと設定について
3. 高度なログ監視
    1. Application Insights
    2. Log Analytics (警告,メトリック、ログ)

<br>



## タスク 1 : デプロイ スロット

App Service プランのサービス レベルが Standard、Premium、または Isolated である場合は、デプロイ スロットを使用して、アプリケーションのステージング、テスト、および本番環境を分離できます。デプロイ スロットを使用すると、アプリケーションの新しいバージョンをテストすることができます。テストが完了したら、トラフィックをデプロイ スロットから本番環境に切り替えることができます。

このハンズオンでは既に演習 2 のバックアップのリストアの手順で既にデプロイ スロットが一つ作成されていますが、このタスクでは新規作成の手順を確認するために、新規にデプロイ スロットを作成します。

具体的な手順は以下のとおりです。

1. [Azure Portal](https://portal.azure.com/) にログインします

2. このハンズオンで使用している App Service、`MovieApp-XYZ` を選択し、画面左のメニューから \[**デプロイ スロット**\] を選択します

3. 遷移した画面で上部の \[**+ スロットの追加**\] をクリックし、画面右に表示される \[**スロットの追加**\] ブレードの各項目を以下のように
設定します

    <img src="images/AppService_new_deploySlot.png" width="700px">

   


* [Azure App Service でステージング環境を設定する](https://learn.microsoft.com/ja-jp/azure/app-service/deploy-staging-slots?tabs=portal#swap-two-slots)







<!--
https://learn.microsoft.com/ja-jp/training/modules/understand-app-service-deployment-slots/
-->



